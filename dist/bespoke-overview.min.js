/*! bespoke-overview v1.0.5-dev Â© 2018 Dan Allen, MIT License */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;(t=(t=(t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).bespoke||(t.bespoke={})).plugins||(t.plugins={})).overview=e()}}(function(){return function e(t,o,n){function i(s,l){if(!o[s]){if(!t[s]){var a="function"==typeof require&&require;if(!l&&a)return a(s,!0);if(r)return r(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var f=o[s]={exports:{}};t[s][0].call(f.exports,function(e){var o=t[s][1][e];return i(o||e)},f,f.exports,e,t,o,n)}return o[s].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e,t,o){t.exports=function(t){return e("insert-css")(".bespoke-parent.bespoke-overview{pointer-events:auto}.bespoke-overview :not(img){pointer-events:none}.bespoke-overview .bespoke-slide{opacity:1;visibility:visible;cursor:pointer;pointer-events:auto}.bespoke-overview .bespoke-active{outline:6px solid #cfd8dc;outline-offset:-3px;-moz-outline-radius:3px}.bespoke-overview .bespoke-bullet{opacity:1;visibility:visible}.bespoke-overview-counter{counter-reset:overview}.bespoke-overview-counter .bespoke-slide::after{counter-increment:overview;content:counter(overview);position:absolute;right:.75em;bottom:.5em;font-size:1.25rem;line-height:1.25}.bespoke-title{visibility:hidden;position:absolute;top:0;left:0;width:100%;pointer-events:auto}.bespoke-title h1{margin:0;font-size:1.6em;line-height:1.2;text-align:center}.bespoke-overview:not(.bespoke-overview-to) .bespoke-title{visibility:visible}.bespoke-overview-to .bespoke-active,.bespoke-overview-from .bespoke-active{z-index:1}",{prepend:!0}),function(e){t="object"==typeof t?t:{};var o,n=/, */,i=/^none(?:, ?none)*$/,r=/^translate\((.+?)px, ?(.+?)px\) scale\((.+?)\)$/,s=/(^\?|&)overview(?=$|&)/,l=!("transition"in document.body.style)&&"webkitTransition"in document.body.style?"webkitTransitionEnd":"transitionend",a=["webkit","Moz"],c="number"==typeof t.columns?parseInt(t.columns):3,f="number"==typeof t.margin?parseFloat(t.margin):15,p=null,u=function(e,t){if(!(t in e.style))for(var o=t.charAt(0).toUpperCase()+t.substr(1),n=0,i=a.length;n<i;n++)if(a[n]+o in e.style)return a[n]+o;return t},v=function(e,t){return parseFloat(e.style[t].slice(6,-1))},d=function(e){if("zoom"in e.style)return parseFloat(e.style.zoom)||void 0},h=function(e){var t=[],o=getComputedStyle(e),r=o[u(e,"transitionProperty")];if(!r||i.test(r))return t;r=r.split(n);var s=o[u(e,"transitionDuration")].split(n),l=o[u(e,"transitionDelay")].split(n);return r.forEach(function(e,o){"0s"===s[o]&&"0s"===l[o]||t.push(e)}),t},m=function(e,t,o,n){t&&(e.style[t]=o);e.offsetHeight;t&&(e.style[t]=n)},b=function(){e.on("activate",b)(),e.parent.scrollLeft=e.parent.scrollTop=0,(t.autostart||s.test(location.search))&&setTimeout(L,100)},y=function(){T(e.slides.indexOf(this))},w=function(t,o){var n=o.index+t;return n>=0&&n<e.slides.length&&e.slide(n,{preview:!0}),!1},k=function(e){!1!==e.scrollIntoView&&x(e.slide,e.index,d(e.slide))},g=function(e){var t=location.search.replace(s,"").replace(/^[^?]/,"?$&");e?history.replaceState(null,null,location.pathname+(t.length>0?t+"&":"?")+"overview"+location.hash):history.replaceState(null,null,location.pathname+t+location.hash)},x=function(t,o,n){e.parent.scrollTop=o<c?0:e.parent.scrollTop+t.getBoundingClientRect().top*(n||1)},E=function(e,t,n,i){n.removeEventListener(l,o,!1),i&&i!==n&&i.removeEventListener(l,o,!1),o=void 0,t.remove("bespoke-overview-"+e)},L=function(){var n,i,r=e.slides,s=e.parent,a=s.classList,b=r.length-1,T=e.slide(),z=T>0?r[0]:r[b],C=u(z,"transform"),B=s.querySelector(".bespoke-scale-parent"),O=1,K=0,S=p,W="webkitAppearance"in s.style;B?O=v(B,C):(n=d(z))&&(O=n),o&&E("from",a,r[0],r[b]),t.title&&(i=function(e){var t=e.firstElementChild;if(t.classList.contains("bespoke-title"))return t.style.width="",t;var o=document.createElement("header");o.className="bespoke-title",o.style[u(o,"transformOrigin")]="0 0";var n=document.createElement("h1");return n.appendChild(document.createTextNode(e.getAttribute("data-title")||document.title)),o.appendChild(n),m(e.insertBefore(o,t)),o}(s)),S||(e.slide(T,{preview:!0}),a.add("bespoke-overview"),addEventListener("resize",L,!1),p=[e.on("activate",k),e.on("prev",w.bind(null,-1)),e.on("next",w.bind(null,1))],t.counter&&a.add("bespoke-overview-counter"),t.location&&g(!0),a.add("bespoke-overview-to"),K=b>0?h(z).length:h(z).join(" ").indexOf("transform")<0?0:1,s.style.overflowY="scroll",s.style.scrollBehavior="smooth",W&&r.forEach(function(e){m(e,"marginBottom","0%","")}));var H=s.clientWidth/O,q=s.clientHeight/O,F=(B||s).offsetWidth-s.clientWidth,N=B?F/2/O:0,A=z.offsetWidth,j=z.offsetHeight,D=H/(c*A+(c+1)*f),$=O*D,I=A*D,U=j*D,Y=(H-I)/2,M=(q-U)/2,V=f*D,_=0,P=0,R=0;i&&(!1!==t.scaleTitle?(i.style[n?"zoom":C]=n?$:"scale("+$+")",i.style.width=s.clientWidth/$+"px",_=i.offsetHeight*D):(F>0&&(i.style.width=s.clientWidth+"px"),_=i.offsetHeight/O)),r.forEach(function(e){var t=R*I+(R+1)*V-N-Y,o=P*U+(P+1)*V+_-M;e.style[C]="translate("+(t.toString().indexOf("e-")<0?t:0)+"px, "+(o.toString().indexOf("e-")<0?o:0)+"px) scale("+D+")",P*c+R===b&&(e.style.marginBottom=f+"px"),e.addEventListener("click",y,!1),R===c-1?(P+=1,R=0):R+=1}),S?x(r[T],T,n):K>0?z.addEventListener(l,o=function(e){e.target===this&&0==(K-=1)&&(E("to",a,this),W&&s.scrollHeight>s.clientHeight&&m(s,"overflowY","auto","scroll"),x(r[T],T,n))},!1):(r.forEach(function(e){m(e)}),a.remove("bespoke-overview-to"),x(r[T],T,n))},T=function(n){e.slide("number"==typeof n?n:e.slide(),{scrollIntoView:!1});var i,s=e.slides,a=e.parent,c=a.classList,f=s.length-1,b=e.slide()>0?s[0]:s[f],w=u(b,"transform"),k=u(b,"transition"),x=a.querySelector(".bespoke-scale-parent"),T="webkitAppearance"in a.style;x?i=v(x,w):(i=d(b))||(i=1),o&&E("to",c,s[0],s[f]);var z=a.scrollTop/i,C=(a.offsetWidth-(x||a).clientWidth)/2/i;a.style.scrollBehavior=a.style.overflowY="",s.forEach(function(e){T&&m(e,"marginBottom","0%",""),e.removeEventListener("click",y,!1)}),(z||C)&&s.forEach(function(e){var t=e.style[w].match(r);e.style[w]="translate("+(parseFloat(t[1])-C)+"px, "+(parseFloat(t[2])-z)+"px) scale("+t[3]+")",m(e,k,"none","")}),a.scrollTop=0,c.remove("bespoke-overview"),removeEventListener("resize",L,!1),(p||[]).forEach(function(e){e()}),p=null,t.counter&&c.remove("bespoke-overview-counter"),t.location&&g(!1),c.add("bespoke-overview-from");var B=f>0?h(b).length:h(b).join(" ").indexOf("transform")<0?0:1;s.forEach(function(e){e.style[w]=""}),B>0?b.addEventListener(l,o=function(e){e.target===this&&0==(B-=1)&&E("from",c,this)},!1):(s.forEach(function(e){m(e)}),c.remove("bespoke-overview-from"))},z=function(){(p?T:L)()},C=function(t){if(79===t.which)t.altKey||t.ctrlKey||t.metaKey||t.shiftKey||z();else if(p)switch(t.which){case 13:t.altKey||t.ctrlKey||t.metaKey||t.shiftKey||T();break;case 38:return w(-c,{index:e.slide()});case 40:return w(c,{index:e.slide()})}};e.on("activate",b),e.on("destroy",function(){removeEventListener("resize",L,!1),document.removeEventListener("keydown",C,!1)}),e.on("overview",z),document.addEventListener("keydown",C,!1)}}},{"insert-css":2}],2:[function(e,t,o){var n={};t.exports=function(e,t){if(!n[e]){n[e]=!0;var o=document.createElement("style");o.setAttribute("type","text/css"),"textContent"in o?o.textContent=e:o.styleSheet.cssText=e;var i=document.getElementsByTagName("head")[0];t&&t.prepend?i.insertBefore(o,i.childNodes[0]):i.appendChild(o)}}},{}]},{},[1])(1)});